# ç«¯å£é…ç½®è¯´æ˜

## ğŸš€ PromptMinder ç«¯å£é…ç½®

### å‰ç«¯å¼€å‘æœåŠ¡å™¨ç«¯å£

`npm run dev` ç›‘å¬ 3000 ç«¯å£ï¼Œé…ç½®å±‚çº§å¦‚ä¸‹ï¼š

1. **package.json è„šæœ¬é…ç½®**ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰ï¼š
   ```json
   "dev": "next dev -p 3000"
   ```

2. **ç¯å¢ƒå˜é‡ PORT**ï¼š
   ```bash
   # åœ¨ .env æ–‡ä»¶ä¸­
   PORT=3000
   ```

3. **å‘½ä»¤è¡Œå‚æ•°**ï¼š
   ```bash
   npm run dev -- -p 3001
   # æˆ–
   next dev -p 3001
   ```

4. **Next.js é»˜è®¤å€¼**ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰ï¼š3000

### åç«¯æœåŠ¡ç«¯å£

#### Docker å®¹å™¨å†…éƒ¨ç«¯å£
- **PostgreSQL**: 5432
- **Kong**: 8000 (proxy), 8001 (admin)
- **PostgREST**: 3000
- **Supabase Auth**: 9999
- **MinIO**: 9000 (API), 9001 (Console)
- **Storage API**: 54321
- **Supabase Studio**: 3333
- **Realtime**: 4000

#### å®¿ä¸»æœºæ˜ å°„ç«¯å£ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
åœ¨ `docker-compose.backend.yml` ä¸­é…ç½®ï¼š

```yaml
ports:
  - '5432:5432'      # PostgreSQL
  - '8000:8000'      # Kong proxy
  - '8001:8001'      # Kong admin
  - '3002:3000'      # PostgREST
  - '9999:9999'      # Auth
  - '9000:9000'      # MinIO API
  - '9001:9001'      # MinIO Console
  - '54321:54321'    # Storage API
  - '3333:3333'      # Studio
  - '4000:4000'      # Realtime
```

### å¦‚ä½•ä¿®æ”¹ç«¯å£

#### ä¿®æ”¹å‰ç«¯ç«¯å£

**æ–¹æ³•ä¸€ï¼šä¿®æ”¹ package.jsonï¼ˆæ¨èï¼‰**
```json
{
  "scripts": {
    "dev": "next dev -p 3001"
  }
}
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨ç¯å¢ƒå˜é‡**
```bash
# åœ¨ .env æ–‡ä»¶ä¸­
PORT=3001
NEXT_PUBLIC_BASE_URL=http://localhost:3001
```

**æ–¹æ³•ä¸‰ï¼šå‘½ä»¤è¡Œå‚æ•°**
```bash
npm run dev -- -p 3001
```

#### ä¿®æ”¹åç«¯ç«¯å£

**å¼€å‘ç¯å¢ƒ**ï¼šä¿®æ”¹ `docker-compose.backend.yml`

```yaml
services:
  db:
    ports:
      - '5433:5432'  # ä¿®æ”¹ä¸º 5433
```

**ç”Ÿäº§ç¯å¢ƒ**ï¼šä¿®æ”¹ `docker-compose.prod.yml`

```yaml
services:
  web:
    ports:
      - '3001:3000'  # ä¿®æ”¹ä¸º 3001
```

### ç«¯å£å†²çªè§£å†³

å¦‚æœé‡åˆ°ç«¯å£å†²çªï¼Œå¯ä»¥ï¼š

1. **æŸ¥çœ‹ç«¯å£å ç”¨**ï¼š
   ```bash
   # macOS/Linux
   lsof -i :3000
   
   # Windows
   netstat -ano | findstr :3000
   ```

2. **ä¿®æ”¹é…ç½®**ï¼š
   ```bash
   # ä¿®æ”¹å‰ç«¯ç«¯å£
   npm run dev -- -p 3001
   
   # ä¿®æ”¹æ•°æ®åº“ç«¯å£
   docker-compose -f docker-compose.backend.yml up -d
   # ç¼–è¾‘ docker-compose.backend.yml ä¿®æ”¹ç«¯å£æ˜ å°„
   ```

3. **åœæ­¢å†²çªæœåŠ¡**ï¼š
   ```bash
   # åœæ­¢å ç”¨ç«¯å£çš„æœåŠ¡
   kill -9 <PID>
   
   # æˆ–é‡å¯ Docker
   docker-compose down
   docker-compose up -d
   ```

### ç«¯å£é…ç½®æœ€ä½³å®è·µ

1. **å¼€å‘ç¯å¢ƒ**ï¼šä½¿ç”¨é»˜è®¤ç«¯å£ä¾¿äºå¼€å‘å’Œè°ƒè¯•
2. **ç”Ÿäº§ç¯å¢ƒ**ï¼šè€ƒè™‘ä¿®æ”¹é»˜è®¤ç«¯å£æé«˜å®‰å…¨æ€§
3. **å›¢é˜Ÿåä½œ**ï¼šç»Ÿä¸€ç«¯å£é…ç½®ï¼Œé¿å…å†²çª
4. **CI/CD**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡åŠ¨æ€é…ç½®ç«¯å£

### å®Œæ•´çš„ç«¯å£æ˜ å°„è¡¨

| æœåŠ¡ | å®¹å™¨å†…ç«¯å£ | å®¿ä¸»æœºç«¯å£ | ç”¨é€” |
|------|------------|------------|------|
| Frontend | 3000 | 3000 | Next.js å¼€å‘æœåŠ¡å™¨ |
| PostgreSQL | 5432 | 5432 | æ•°æ®åº“ |
| Kong Proxy | 8000 | 8000 | API ç½‘å…³ |
| Kong Admin | 8001 | 8001 | ç®¡ç†ç•Œé¢ |
| PostgREST | 3000 | 3002 | REST API |
| Auth | 9999 | 9999 | è®¤è¯æœåŠ¡ |
| MinIO API | 9000 | 9000 | å¯¹è±¡å­˜å‚¨ |
| MinIO Console | 9001 | 9001 | å­˜å‚¨ç®¡ç†ç•Œé¢ |
| Storage API | 54321 | 54321 | å­˜å‚¨æœåŠ¡ API |
| Studio | 3333 | 3333 | Supabase ç®¡ç†ç•Œé¢ |
| Realtime | 4000 | 4000 | å®æ—¶è®¢é˜… |